@using MenuOrderingSystem.Models
@model PagedResult<MenuOrderingSystem.Models.Drink>

<style>
    .premium-table {
        width: 100%;
        border-collapse: separate;
        border-spacing: 0;
    }

        .premium-table thead th {
            background-color: #f9fafb;
            padding: 16px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: #6b7280;
            border-bottom: 2px solid #e5e7eb;
            white-space: nowrap;
        }

        .premium-table tbody td {
            padding: 12px 16px;
            vertical-align: middle;
            border-bottom: 1px solid #f3f4f6;
            color: #374151;
            font-size: 0.95rem;
        }

        .premium-table tbody tr:hover td {
            background-color: #f8fafc;
        }

    .product-thumb {
        width: 60px;
        height: 60px;
        object-fit: cover;
        border-radius: 10px;
        border: 1px solid #eee;
        box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        transition: transform 0.2s;
    }

        .product-thumb:hover {
            transform: scale(1.1);
            cursor: zoom-in;
        }

    .no-image-placeholder {
        width: 60px;
        height: 60px;
        border-radius: 10px;
        background: #f3f4f6;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #9ca3af;
        font-size: 0.75rem;
        text-align: center;
        border: 1px solid #e5e7eb;
    }

    /* Sortable Headers */
    .sort-link {
        text-decoration: none;
        color: inherit;
        display: inline-flex;
        align-items: center;
        gap: 5px;
        cursor: pointer;
    }

        .sort-link:hover {
            color: #1a3c1e;
        }

    .sort-icon {
        font-size: 0.8rem;
        opacity: 0.4;
    }

    /* Badges & Buttons */
    .badge-pill {
        padding: 6px 12px;
        border-radius: 20px;
        font-size: 0.75rem;
        font-weight: 600;
        letter-spacing: 0.5px;
    }

    .badge-available {
        background-color: #ecfdf5;
        color: #047857;
    }

    .badge-unavailable {
        background-color: #fef2f2;
        color: #b91c1c;
    }

    .btn-icon-soft {
        width: 32px;
        height: 32px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        color: #4b5563;
        background: transparent;
        border: 1px solid transparent;
        transition: all 0.2s;
        margin-right: 4px;
        text-decoration: none;
    }

    .btn-edit:hover {
        background-color: #fffbeb;
        color: #d97706;
        border-color: #fcd34d;
    }

    .btn-delete:hover {
        background-color: #fef2f2;
        color: #ef4444;
        border-color: #fecaca;
    }

    /* Pagination */
    .pagination-bar {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding-top: 20px;
        border-top: 1px solid #f3f4f6;
        margin-top: 10px;
    }

    .btn-page {
        padding: 6px 12px;
        border: 1px solid #e5e7eb;
        background: #fff;
        border-radius: 6px;
        color: #374151;
        font-size: 0.85rem;
        font-weight: 500;
        transition: all 0.2s;
        margin: 0 2px;
    }

        .btn-page:hover {
            border-color: #c5a059;
            color: #c5a059;
        }

        .btn-page.active {
            background: #1a3c1e;
            color: white;
            border-color: #1a3c1e;
        }
</style>

<div class="table-responsive" style="border-radius: 12px; border: 1px solid #eee;">
    <table class="premium-table">
        <thead>
            <tr>
                <th style="width: 80px;">Image</th>
                <th>
                    <a href="javascript:void(0)" class="sort-link" data-sort="name">
                        Product Name <span id="sort-name" class="sort-icon">⇅</span>
                    </a>
                </th>
                <th>Category</th>
                <th>
                    <a href="javascript:void(0)" class="sort-link" data-sort="price">
                        Regular Price <span id="sort-price" class="sort-icon">⇅</span>
                    </a>
                </th>
                <th>Large Price</th>
                <th>Status</th>
                <th class="text-end">Actions</th>
            </tr>
        </thead>
        <tbody>
            @if (!Model.Items.Any())
            {
                <tr>
                    <td colspan="7" class="text-center py-5 text-muted">
                        <i class="fas fa-cocktail fa-3x mb-3 text-light"></i>
                        <p class="mb-0">No drinks found.</p>
                    </td>
                </tr>
            }
            else
            {
                @foreach (var drink in Model.Items)
                {
                    <tr>
                        <td>
                            @if (!string.IsNullOrEmpty(drink.ImageURL))
                            {
                                <img src="~/drinks/@drink.ImageURL" alt="@drink.Name" class="product-thumb" />
                            }
                            else
                            {
                                <div class="no-image-placeholder"><i class="fas fa-image"></i></div>
                            }
                        </td>
                        <td><div class="fw-bold text-dark">@drink.Name</div></td>
                        <td><span class="text-muted small text-uppercase fw-bold">@drink.Category?.CategoryName</span></td>
                        <td class="fw-bold" style="color: #1a3c1e;">RM @drink.PriceRegular.ToString("0.00")</td>
                        <td class="text-muted">RM @drink.PriceLarge.ToString("0.00")</td>
                        <td>
                            @if (drink.IsAvailable)
                            {
                                <span class="badge-pill badge-available">Available</span>
                            }
                            else
                            {
                                <span class="badge-pill badge-unavailable">Out of Stock</span>
                            }
                        </td>
                        <td class="text-end">
                            <a asp-action="EditDrink" asp-route-id="@drink.DrinkID" class="btn-icon-soft btn-edit" title="Edit">
                                <i class="fas fa-pencil-alt"></i>
                            </a>
                            <form asp-action="DeleteDrink" asp-route-id="@drink.DrinkID" method="post" style="display:inline;">
                                <button type="submit" class="btn-icon-soft btn-delete"
                                        onclick="return confirm('Delete @drink.Name?');" title="Delete">
                                    <i class="fas fa-trash-alt"></i>
                                </button>
                            </form>
                        </td>
                    </tr>
                }
            }
        </tbody>
    </table>
</div>

@if (Model.TotalItems > 0)
{
    <div class="pagination-bar">
        <div class="text-muted small">
            Showing <span class="fw-bold text-dark">@Model.Items.Count</span> of <span class="fw-bold text-dark">@Model.TotalItems</span> items
        </div>
        <div>
            @for (int i = 1; i <= Math.Ceiling((double)Model.TotalItems / Model.PageSize); i++)
            {
                <button class="btn-page @(i == Model.Page ? "active" : "") load-page" data-page="@i">@i</button>
            }
        </div>
    </div>
}